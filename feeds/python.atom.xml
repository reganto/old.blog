<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>رگانتو - Python</title><link href="/" rel="alternate"></link><link href="/feeds/python.atom.xml" rel="self"></link><id>/</id><updated>2022-06-16T10:20:00+04:30</updated><subtitle>دست و دل نوشته‌های گیکی از وانیار</subtitle><entry><title>آماده‌سازی VSCode برای Django</title><link href="/vscode-for-djagno.html" rel="alternate"></link><published>2022-06-16T10:20:00+04:30</published><updated>2022-06-16T10:20:00+04:30</updated><author><name>Reganto</name></author><id>tag:None,2022-06-16:/vscode-for-djagno.html</id><summary type="html">&lt;p&gt;مراحل آماده‌سازی vscode برای کار با فریمورک Djagno&lt;/p&gt;</summary><content type="html">&lt;p&gt;پوشه‌ای برای پروژه خود بسازید:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;mkdir myproject
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;vscode را اجرا کنید و از منوی File بر روی زیرمنوی Add folder to workspace بزنید. پوشه پروژه&lt;code&gt;myproject&lt;/code&gt; را به vscode اضافه کنید.&lt;/p&gt;
&lt;p&gt;برای ذخیره workspace جاری از منوی File بر روی Save workspace as... بزنید.&lt;/p&gt;
&lt;p&gt;در صورتی که از ورژن کنترل استفاده می‌کنید،‌ Git را در دایرکتوری جاری init کنید&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;git init
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;یک فایل &lt;code&gt;.gitignore&lt;/code&gt; مخصوص پایتون اضافه کنید. یک نمونه گیت‌ایگنور برای پایتون را می‌توانید در &lt;a href="https://github.com/reganto/usernado/blob/master/.gitignore"&gt;این مسیر&lt;/a&gt; بیابید.&lt;/p&gt;
&lt;p&gt;برای پروژه‌ی جاری یک &lt;code&gt;Virtualenv&lt;/code&gt; بسازید:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;python -m venv venv
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;برای فعال‌سازی virtualenv در شل می‌توان از دستور &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nb"&gt;source&lt;/span&gt; venv/bin/activate
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;استفاده کرد.&lt;/p&gt;
&lt;p&gt;حالا نوبت آن است که virtualenv ساخته شده را به vscode معرفی کنیم. در vscode کلید‌های ترکیبی &lt;code&gt;Ctrl+Shift+p&lt;/code&gt; را بفشارید و &lt;code&gt;select interpreter&lt;/code&gt; را تایپ کنید. از مسیر &lt;code&gt;myproject/venv/bin/python&lt;/code&gt; می‌توانید پایتون را به vscode معرفی کنید.&lt;/p&gt;
&lt;p&gt;در مسیر &lt;code&gt;myproject&lt;/code&gt; اگر پوشه &lt;code&gt;.vscode&lt;/code&gt; وجود ندارد، آن را بسازید. فایلی به نام &lt;code&gt;settings.json&lt;/code&gt; در این پوشه ایجاد کنید. در این فایل می‌توانیم تنظیمات vscode برای workspace  جاری را قرار دهیم. بعضی از مقادیر از این قرارند:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;telemetry.telemetryLevel&amp;quot;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;quot;off&amp;quot;&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;python.analysis.autoImportCompletions&amp;quot;&lt;/span&gt;: true,
    &lt;span class="s2"&gt;&amp;quot;autoDocstring.docstringFormat&amp;quot;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;quot;sphinx&amp;quot;&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;python.linting.flake8Enabled&amp;quot;&lt;/span&gt;: true,
    &lt;span class="s2"&gt;&amp;quot;python.linting.enabled&amp;quot;&lt;/span&gt;: true,
    &lt;span class="s2"&gt;&amp;quot;editor.formatOnSave&amp;quot;&lt;/span&gt;: true,
    &lt;span class="s2"&gt;&amp;quot;python.formatting.provider&amp;quot;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;quot;black&amp;quot;&lt;/span&gt;,
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;اولین مورد مربوط به خاموش کردن &lt;code&gt;telemetry&lt;/code&gt; برای vscode است تا اطلاعاتی از فعالیت‌های ما برای توسعه‌دهندگان فرستاده نشود. دومین مورد مربوط به قابلیت &lt;code&gt;autoImport&lt;/code&gt; برای vscode است که تا زمان نگارش این متن کارایی خوبی نداشته و بهتر است خاموش شود. سومین مورد مربوط به تعیین نوع &lt;code&gt;docstring&lt;/code&gt; برای توابع و کلاس‌هاست. این مورد مربوط به یک افزونه vscode است. مورد بعدی برای فعال نمودن ‍‍‍&lt;code&gt;flake8&lt;/code&gt; به عنوان ‍&lt;code&gt;Linter&lt;/code&gt; استفاده می‌شود. مورد بعدی برای فعال نمودن قابلیت &lt;code&gt;linting&lt;/code&gt; برای vscode است. مورد بعدی برای فرمت‌بندی کد در هنگام ذخیره آن استفاده می‌شود یعنی هربار که کد را ذخیره می‌کنیم بلافاصله کد به صورت خودکار با یک &lt;code&gt;Code Formatter&lt;/code&gt; مانند &lt;code&gt;Black&lt;/code&gt; فرمت‌بندی می‌شود. مورد آخر &lt;code&gt;Code Formatter&lt;/code&gt; را مشخص می‌کند که معمولا در پروژه‌هایی جنگویی توصیه به استفاده از &lt;code&gt;Black&lt;/code&gt; به عنوان &lt;code&gt;Code Formatter&lt;/code&gt; است.&lt;/p&gt;
&lt;p&gt;برای مدیریت وابستگی‌ها از &lt;code&gt;poetry&lt;/code&gt; استفاده کنید. با دستور &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;poetry init
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;poetry  را برای پروژه جاری تنظیم کنید. به سوالاتی که poetry درباره‌ی پروژه می‌پرسد جواب دهید.&lt;/p&gt;
&lt;p&gt;اطلاعات بیشتر راجع‌به &lt;a href="https://python-poetry.org/"&gt;poetry&lt;/a&gt; را می‌توانید در وبسایت ابزار بیابید.&lt;/p&gt;
&lt;p&gt;در صورتی که &lt;code&gt;virtualenv&lt;/code&gt; فعال نیست آن را فعال کنید.&lt;/p&gt;
&lt;p&gt;حالا با دستور &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;poetry env info
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;از فعال بودن &lt;code&gt;virtualenv&lt;/code&gt; اطمینال حاصل کنید.&lt;/p&gt;
&lt;p&gt;لینتر &lt;code&gt;Flake8&lt;/code&gt; و فرمتر &lt;code&gt;Black&lt;/code&gt; را نصب کنید:&lt;/p&gt;
&lt;p&gt;‍‍‍&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;poetry add black flake8 --dev
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;همانطور که می‌بینید این پکیج‌ها را تنها برای حالت &lt;code&gt;development&lt;/code&gt; نصب کردیم.&lt;/p&gt;
&lt;p&gt;در مرحله بعد باید &lt;code&gt;Django&lt;/code&gt; و ‍&lt;code&gt;DRF&lt;/code&gt; را نصب کنیم. «در صورتی که تمایل به ایجاد API دارید DRF را نصب کنید»&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;poetry add django djangorestframework
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;به دلیل عمل کردن &lt;code&gt;poetry&lt;/code&gt; و &lt;code&gt;pip&lt;/code&gt; روی یک &lt;code&gt;virtualenv&lt;/code&gt; می‌توانیم فایل &lt;code&gt;requirements.txt&lt;/code&gt;  را به سادگی ایجاد کنیم&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;pip freeze &amp;gt; requirements.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;یک پروژه جنگو ایجاد کنید&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;django-admin startproject config .
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;بر روی فایل &lt;code&gt;manage.py&lt;/code&gt; کلیک کنید و آنگاه بر روی زبانه‌ی &lt;code&gt;Run and Debug&lt;/code&gt; بزنید و در نهایت &lt;code&gt;launch‍&lt;/code&gt;  را کلیک کنید. از لیست فریم‌ورک‌ها Django را انتخاب کنید. با طی این مراحل فایل با نام &lt;code&gt;launch.json&lt;/code&gt; در مسیر &lt;code&gt;myproject/.vscode/&lt;/code&gt; ساخته می‌شود. حالا با &lt;code&gt;F5&lt;/code&gt; می‌توانید جنگو را اجرا کنید. در واقع F5 همان کار &lt;code&gt;./manage.py runserver&lt;/code&gt; را انجام می‌دهد.&lt;/p&gt;
&lt;p&gt;ساختار فایل‌ها:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;myproject/
    .vscode/
        settings.json
        launch.json
    backend/
        config/
            __init__.py
            asgi.py
            settings.py
            urls.py
            wsgi.py
        venv/
        .gitignore
        manage.py
        poetry.lock
        pyproject.toml
        requirements.txt

    frontend/
    .gitignore
    CONTRIBUTING.md
    LICENSE.txt
    myproject.code-workspace
    README.md
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;VSCode Django Checklist:

- &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt; add folder to workspace

- &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt; save workspace  

- &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt; git init

- &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt; add gitignore to backend

- &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt; add venv

- &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt; activate venv

- &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="k"&gt;select&lt;/span&gt; python &lt;span class="k"&gt;for&lt;/span&gt; vscode

- &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt; add .vscode/settings.json

- &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt; poetry init

- &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt; install black &lt;span class="p"&gt;&amp;amp;&lt;/span&gt; flake8 &lt;span class="k"&gt;for&lt;/span&gt; development

- &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt; install dj &lt;span class="p"&gt;&amp;amp;&lt;/span&gt; drf

- &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt; generate requirements.txt

- &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt; django startproject

- &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt; add .vscode/launch.json &lt;span class="k"&gt;for&lt;/span&gt; django

- &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt; add .gitignore to project level folder

- &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt; add PROJECT.code-workspace and .vscode/* to .gitignore

- &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt; add LICENSE &lt;span class="p"&gt;&amp;amp;&lt;/span&gt; CONTRIBUTING.md &lt;span class="p"&gt;&amp;amp;&lt;/span&gt; README.md and so on so forth
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;یک نمونه پروژه ساخته شده را می‌توانید در مسیر &lt;a href="https://github.com/reganto/mandos"&gt;https://github.com/reganto/mandos&lt;/a&gt; بیابید.&lt;/p&gt;
&lt;p&gt;افزونه‌هایی مورد نیاز از این قرارند:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;autoDocstring&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Pylance&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Python&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;سایر افزونه‌های جالب:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Docker&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Lorem Ipsum&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Material Icon Theme&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;PostgreSQL&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;</content><category term="Python"></category><category term="vscode"></category><category term="django"></category></entry></feed>